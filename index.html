<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <title>Be My Valentine ğŸ’˜</title>
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <a class="skip-link" href="#main">Skip to content</a>

  <header class="site-header" role="banner">
    <nav class="nav" aria-label="Page">
      <a class="brand" href="#top" data-scroll>ğŸ’— Valentine</a>

      <div class="nav-links">
        <a href="#letter" data-scroll>Letter</a>
        <a href="#puzzle" data-scroll>Puzzle</a>
        <a href="#question" data-scroll>Question</a>
      </div>

      <button id="musicToggle" class="btn btn-ghost" type="button" aria-pressed="false">
        <span class="icon" aria-hidden="true">â™«</span>
        <span class="music-label">Music: Off</span>
      </button>
    </nav>
  </header>

  <div id="top" class="hearts-bg" aria-hidden="true"></div>

  <!-- Optional audio (off by default, only starts after user interaction) -->
  <audio id="bgm" preload="none" loop>
    <source src="assets/music.mp3" type="audio/mpeg" />
  </audio>

  <main id="main" class="main" role="main">
    <!-- HERO -->
    <section class="hero" aria-labelledby="heroTitle">
      <div class="hero-inner">
        <p class="eyebrow">A little page, made with a lot of love</p>
        <h1 id="heroTitle" class="title">
          Will you open this Valentineâ€™s surprise?
        </h1>
        <p class="subtitle">
          Tap the envelope, solve the puzzle, then answer one tiny question ğŸ’
        </p>

        <div class="hero-actions">
          <a class="btn" href="#letter" data-scroll>Start</a>
          <button class="btn btn-ghost" type="button" id="revealHint">
            Show hints
          </button>
        </div>

        <div class="hint" id="hintBox" hidden>
          <ul>
            <li>Envelope: click or press Enter/Space.</li>
            <li>Puzzle: click tiles next to the empty spot (or use keyboard).</li>
            <li>Captions: tap the â€œğŸ’¬â€ buttons to reveal.</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- LOVE LETTER -->
    <section id="letter" class="section" aria-labelledby="letterTitle">
      <div class="section-head">
        <h2 id="letterTitle">A Love Letter</h2>
        <p class="section-subtitle">Click the envelope to open it.</p>
      </div>

      <div class="card">
        <div class="letter-wrap">
          <button
            id="envelopeBtn"
            class="envelope"
            type="button"
            aria-expanded="false"
            aria-controls="letterPaper"
          >
            <span class="sr-only">Open the envelope</span>
            <span class="env-body" aria-hidden="true"></span>
            <span class="env-flap" aria-hidden="true"></span>
            <span class="env-seal" aria-hidden="true">ğŸ’—</span>
          </button>

          <article
            id="letterPaper"
            class="paper"
            tabindex="-1"
            aria-label="Love letter"
          >
            <h3 class="paper-title">My Dearest,</h3>

            <p>
              I donâ€™t need a special day to love youâ€”<em>but Iâ€™ll happily take one</em>.
              You make ordinary moments feel like soft music and warm light.
            </p>

            <p>
              Thank you for the laughs, the patience, the little glances that say,
              â€œweâ€™re in this together.â€ I choose youâ€”today, and all the tomorrows.
            </p>

            <p class="paper-signoff">
              Forever yours, <br />
              <span class="sig">ğŸ’</span>
            </p>

            <div class="caption-row">
              <button class="caption-toggle" type="button" aria-expanded="false" aria-controls="cap1">
                ğŸ’¬ Reveal a tiny secret
              </button>
              <p id="cap1" class="caption" hidden>
                Youâ€™re my favorite notification.
              </p>
            </div>
          </article>
        </div>

        <div class="note">
          <p>
            <strong>Tip:</strong> Once opened, the envelope will fade into the background so you can keep going.
          </p>
        </div>
      </div>
    </section>

    <!-- PUZZLE -->
    <section id="puzzle" class="section" aria-labelledby="puzzleTitle">
      <div class="section-head">
        <h2 id="puzzleTitle">A Little Puzzle</h2>
        <p class="section-subtitle">
          Slide the tiles to reveal the photo. Solve it to unlock the final question.
        </p>
      </div>

      <div class="card">
        <div class="puzzle-top">
          <div class="puzzle-meta" role="status" aria-live="polite">
            <span id="moves">Moves: 0</span>
            <span class="dot" aria-hidden="true">â€¢</span>
            <span id="puzzleStatus">Not solved</span>
          </div>

          <div class="puzzle-actions">
            <button id="shuffleBtn" class="btn" type="button">Shuffle</button>
            <button id="resetBtn" class="btn btn-ghost" type="button">Reset</button>
          </div>
        </div>

        <div class="puzzle-area">
          <div
            id="puzzleGrid"
            class="puzzle-grid"
            role="group"
            aria-label="3 by 3 sliding tile puzzle"
          ></div>

          <div class="puzzle-side">
            <div class="preview" aria-label="Image preview">
              <div class="preview-img" aria-hidden="true"></div>
              <p class="preview-label">Preview</p>
            </div>

            <div class="caption-row">
              <button class="caption-toggle" type="button" aria-expanded="false" aria-controls="cap2">
                ğŸ’¬ Reveal a caption
              </button>
              <p id="cap2" class="caption" hidden>
                Every piece finds its placeâ€”just like us.
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- QUESTION -->
    <section id="question" class="section" aria-labelledby="questionTitle">
      <div class="section-head">
        <h2 id="questionTitle">One Last Thingâ€¦</h2>
        <p class="section-subtitle">This appears after the puzzle is solved.</p>
      </div>

      <div class="card card-center">
        <div id="valentineCard" class="valentine-card" hidden>
          <div class="sparkle" aria-hidden="true"></div>

          <h3 class="val-title">
            <span class="heart" aria-hidden="true">ğŸ’˜</span>
            <span id="typingText" class="typing" aria-live="polite"></span>
          </h3>

          <p class="val-sub">
            No pressure. Justâ€¦ my heart will do a tiny happy dance if you say yes.
          </p>

          <div class="val-actions">
            <button id="yesBtn" class="btn" type="button">Yes</button>
            <button id="noBtn" class="btn btn-ghost" type="button">No</button>
          </div>

          <p id="response" class="response" role="status" aria-live="polite"></p>

          <div class="caption-row">
            <button class="caption-toggle" type="button" aria-expanded="false" aria-controls="cap3">
              ğŸ’¬ One more caption
            </button>
            <p id="cap3" class="caption" hidden>
              If love is a language, youâ€™re my favorite sentence.
            </p>
          </div>
        </div>

        <div id="lockedMessage" class="locked">
          <p class="locked-title">ğŸ”’ Locked</p>
          <p class="locked-text">
            Solve the puzzle to reveal the Valentine card.
          </p>
          <a class="btn btn-ghost" href="#puzzle" data-scroll>Go to Puzzle</a>
        </div>
      </div>
    </section>

    <footer class="footer">
      <p>
        Made with <span aria-hidden="true">ğŸ’—</span><span class="sr-only">love</span> â€”
        press <kbd>Tab</kbd> to explore, <kbd>Enter</kbd>/<kbd>Space</kbd> to activate buttons.
      </p>
    </footer>
  </main>

  <script src="app.js"></script>
</body>
</html>
