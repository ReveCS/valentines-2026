<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <title>Be My Valentine ğŸ’Œ</title>
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <a class="skip-link" href="#sceneRoot">Skip to content</a>

  <!-- Optional audio (off by default) -->
  <audio id="bgm" preload="none" loop>
    <source src="assets/music.mp3" type="audio/mpeg" />
  </audio>

  <main id="sceneRoot" class="scene-root" role="main" aria-label="Valentine slideshow">
    <!-- Top-right controls -->
    <div class="ui-bar">
      <button id="musicToggle" class="btn btn-ghost" type="button" aria-pressed="false">
        <span aria-hidden="true">â™«</span>
        <span class="music-label">Music: Off</span>
      </button>
    </div>

    <!-- SCENE 1: Envelope only -->
    <section class="scene scene-active" data-scene="1" aria-label="Envelope scene">
      <div class="stage">
        <button
          id="envelopeBtn"
          class="envelope"
          type="button"
          aria-expanded="false"
          aria-controls="letterCard"
        >
          <span class="sr-only">Open the envelope</span>

          <div class="env-back" aria-hidden="true"></div>
          <div class="env-flap" aria-hidden="true"></div>

          <div class="stamp" aria-hidden="true">
            <span class="stamp-heart">â¤</span>
          </div>

          <article id="letterCard" class="card-in-envelope" tabindex="-1" aria-label="Love note card">
            <p class="card-line">To my favorite person,</p>
            <p class="card-line muted">I made you a tiny adventure.</p>
            <p class="card-line">Open me ğŸ’—</p>
          </article>
        </button>
      </div>
      <p class="scene-hint" aria-hidden="true">Click the envelope to begin</p>
    </section>

    <!-- SCENE 2: Square overlay with text + Next -->
    <section class="scene" data-scene="2" aria-label="Message overlay scene">
      <div class="overlay" role="dialog" aria-modal="true" aria-labelledby="overlay1Title">
        <h1 id="overlay1Title" class="overlay-title">A little noteâ€¦</h1>
        <p class="overlay-text">
          Love is made of small moments â€” the kind we keep choosing.  
          Ready for the next part?
        </p>

        <button id="toPuzzleBtn" class="btn" type="button">
          Next
        </button>

        <button class="caption-toggle" type="button" aria-expanded="false" aria-controls="cap1">
          ğŸ’¬ Reveal-on-tap caption
        </button>
        <p id="cap1" class="caption" hidden>
          If kisses were currency, Iâ€™d be rich.
        </p>
      </div>
    </section>

    <!-- SCENE 3: Puzzle overlay -->
    <section class="scene" data-scene="3" aria-label="Puzzle scene">
      <div class="overlay" role="dialog" aria-modal="true" aria-labelledby="puzzleTitle">
        <h2 id="puzzleTitle" class="overlay-title">Slide Puzzle</h2>
        <p class="overlay-text">
          This one is intentionally short â€” about <strong>3â€“4 moves</strong> to solve.
        </p>

        <div class="puzzle-top">
          <div class="puzzle-meta" role="status" aria-live="polite">
            <span id="moves">Moves: 0</span>
            <span class="dot" aria-hidden="true">â€¢</span>
            <span id="puzzleStatus">Not solved</span>
          </div>
          <div class="puzzle-actions">
            <button id="shuffleBtn" class="btn btn-ghost" type="button">Reshuffle</button>
          </div>
        </div>

        <div class="puzzle-area">
          <div
            id="puzzleGrid"
            class="puzzle-grid"
            role="group"
            aria-label="3 by 3 sliding tile puzzle"
          ></div>

          <div class="preview" aria-label="Image preview">
            <div class="preview-img" aria-hidden="true"></div>
            <p class="preview-label">Preview</p>
          </div>
        </div>

        <button class="caption-toggle" type="button" aria-expanded="false" aria-controls="cap2">
          ğŸ’¬ Reveal-on-tap caption
        </button>
        <p id="cap2" class="caption" hidden>
          Every piece finds its place â€” just like us.
        </p>
      </div>
    </section>

    <!-- SCENE 4: Final question overlay -->
    <section class="scene" data-scene="4" aria-label="Valentine question scene">
      <div class="overlay" role="dialog" aria-modal="true" aria-labelledby="questionTitle">
        <h2 id="questionTitle" class="overlay-title">One last thingâ€¦</h2>

        <h3 class="val-title">
          <span aria-hidden="true">ğŸ’˜</span>
          <span id="typingText" class="typing" aria-live="polite"></span>
        </h3>

        <p class="overlay-text">
          No pressure â€” just a little courage and a lot of heart.
        </p>

        <div class="val-actions">
          <button id="yesBtn" class="btn" type="button">Yes</button>
          <button id="noBtn" class="btn btn-ghost" type="button">No</button>
        </div>

        <p id="response" class="response" role="status" aria-live="polite"></p>

        <button class="caption-toggle" type="button" aria-expanded="false" aria-controls="cap3">
          ğŸ’¬ Reveal-on-tap caption
        </button>
        <p id="cap3" class="caption" hidden>
          If love is a language, youâ€™re my favorite sentence.
        </p>
      </div>
    </section>
  </main>

  <script src="app.js"></script>
</body>
</html>
